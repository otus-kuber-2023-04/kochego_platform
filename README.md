# kochego_platform
kochego Platform repository

# ДЗ № 1. Знакомство с Kubernetes, основные понятия и архитектура

- Поднят minikube в локальном окружении (wsl), доставлен dashboard, k9s
- Проверена его работоспособность и отказоустойчивость (при удалении всех подов в namespace kube-system они восстанавливаются)
- Написан Dockerfile для запуска простейшего веб сервера на основе nginx и из него собран образ и запушен в Dockerhub
- Написан манифест для создания пода на основе образа веб сервера созданного ранее и успешно применен в кластер. Для приложения пробросила порты и убедилась, что оно работает
- Собран образ для frontend микросервиса для приложения hipster shop и запушен в Dockerhub
- Запущен под для frontend микросервиса в ad-hoc режиме и сгенерирован манифест, после применения данного манифеста под запускается с ошибками
- После анализа логов поправлен манифест и под запущен без ошибок (добавлены переменные)

# ДЗ №2. Механика запуска и взаимодействия контейнеров в Kubernetes

- Развернут кластер kind, проверена его работоспособность
- **frontend-replicaset.yaml** Поднят под для frontend модуля приложения hipster shop при помощи контроллера ReplicaSet, количество реплик доведено до 3
- Обновлен и применен манифест для frontend типа ReplicaSet с использованием новой версии образа. После применения запущенные поды не обновились (не изменилась версия образа), поскольку ReplicaSet контролирует только количество запущенных экземпляров подов. Если удалить все поды, то они пересоздадутся уже с новой версией образа.
- **paymentservice-replicaset.yaml** Написан и применен манифест для paymentService модуля приложения hipster shop при помощи контроллера ReplicaSet. 
- **paymentservice-deployment.yaml** Затем этот манифест переписан под создание при помощи контроллера Deployment. Данный контроллер помимо сущности Deployment создал нам ReplicaSet и поднял необходимое количество подов.
- Проверен сценарий отката деплоймента
- **paymentservice-deployment-bg.yaml && paymentservice-deployment-reverse.yaml** Для paymentService реализованы стратегии blue-green deployment и Reverse Rolling Update путем настройки параметров maxSurge и maxUnavailable
- **frontend-deployment.yaml** Для frontend написан Deployment манифест, дописана readinessProbe и проверена ее работа
- Создан манифест для развертывания Prometheus Node Exporter при помощи контроллера DaemonSet. В результате применения было поднято по одному поду на каждой worker ноде кластера. Проброшен порт и проверена работоспособность
- **node-exporter-daemonset.yaml** Модифицирован манифест, чтобы Node Exporter был развернут не только на worker, но и на control-plane нодах.